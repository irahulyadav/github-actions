name: GitHub Workflow Demo
on:
  workflow_dispatch:
    inputs:
      environment:
        description: 'Environment to deploy to'
        type: environment
        required: true
jobs:
  Build:
    runs-on: ubuntu-latest
    steps:
      - name: â¬‡ï¸ Checkout Main Project
        uses: actions/checkout@v4

      - name: â˜• Set up JDK 17
        uses: actions/setup-java@v3
        with:
          distribution: temurin
          java-version: 17

      - name: ğŸ¤– Set up Android SDK
        uses: android-actions/setup-android@v3

      - name: ğŸ› ï¸ Cache Kotlin/Native Compiler
        uses: actions/cache@v3
        with:
          path: ~/.konan
          key: ${{ runner.os }}-konan

      - name: âš™ï¸ Assemble Android Build
        run: ./gradlew assembleDebug
  Test:
    runs-on: ubuntu-latest
    if: github.event_name == 'workflow_dispatch'
    needs: Build
    environment: Test
    steps:
      - run: echo "ğŸ§ª Testing..."
  Load-Test:
    runs-on: ubuntu-latest
    if: github.event_name == 'workflow_dispatch'
    needs: Build
    environment: Load-Test
    steps:
      - run: |
          echo "ğŸ§ª Testing..."
          sleep 15

  Production:
    runs-on: ubuntu-latest
    needs: [Test, Load-Test]
    environment:
      name: Production
      url: https://writeabout.net
    if: github.event.inputs.environment == 'Production'
    steps:
      - run: |
          echo "ğŸš€ Step 1..."
          sleep 10
      - run: |
          echo "ğŸš€ Step 2..."
          sleep 10
      - run: |
          echo "ğŸš€ Step 3..."
          sleep 10
      - run: |
          echo "ğŸš€ Step 4..."
          sleep 10
      - run: |
          echo "ğŸš€ Step 5..."
          sleep 10
